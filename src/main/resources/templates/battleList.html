<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head th:insert="~{partials/head :: head ('Battle List')}"></head>
</head>
<body>
<nav th:insert="~{partials/navbar :: navbar}"></nav>
<div class="page-wrapper">
    <div class="container grow" style="margin-top: 13vh">
        <div class="row flex-direction-column">
            <!--          BATTLE            -->
            <div class="column" th:each="battle : ${battles}" th:data-battle-id="${battle.id}">
                <div>
                    <h1><a th:text="${battle.title}" th:href="@{|/battlegrounds/${battle.id}|}"></a>
                        <button id="battle-edit-btn" style="background: transparent"><img class="battle-edit-img"
                                                                                          src="/images/green-edit.png"
                                                                                          alt="green edit button">
                        </button>
                    </h1>
                </div>
                <div class="edit-modal container">
                    <div class="row justify-content-end">
                        <div class="modal-close">Close</div>
                    </div>
                    <div class="row grow justify-center">
                        <!--              EDIT BATTLE FORM          -->
                        <form th:action="@{/battlegrounds/edit-battle-title}" th:method="post" class="justify-center"
                              style="width: 100%">
                            <input type="hidden" th:value="${battle.id}" name="battleId">
                            <input th:value="${battle.title}" name="battleTitle" id="battleTitleForm"
                                   style="width: 100%; height: 50px">
                            <div class="row justify-center" style="width: 100%">
                                <button type="submit">Change Battle Name</button>
                            </div>
                        </form>
                    </div>
                    <div class="row justify-center">
                        <div class="column justify-center">
                            <!--              DELETE BATTLE FORM        -->
                            <form th:action="@{/battlegrounds/delete-battle}" th:method="post">
                                <input type="hidden" th:value="${battle.id}" name="battleId">
                                <button type="submit">Delete Battle</button>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <!--            CREATE BATTLE FORM              -->
            <div class="column">
                <form th:action="@{/battlegrounds/create-battle}" th:method="post">
                    <input type="text" placeholder="Add your battle..." name="battleTitle"/>
                    <button type="submit">Submit</button>
                </form>
            </div>
        </div>
    </div>
</div>

<footer th:insert="~{partials/footer :: footer}"></footer>
<script src="/js/battleList.js"></script>
</body>
</html>